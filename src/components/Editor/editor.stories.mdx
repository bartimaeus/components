import { Suspense } from 'react'
import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks'
import { Form, Field } from 'react-final-form'

import FormItem from '../FormItem'
import Editor from './index'

<Meta title="Form Helpers|Editor" component={Editor} />

# Editor

Editor is a wysiwyg text editor using **draft-js**.

## Usage

Editor requires two properties **value** _(string)_ and **onChange** _(function)_.

```jsx
import { Editor } from '@bartimaeus/components'

const Form = props => {
  const [value, onChange] = useState()
  const save = async () => {
    await props.onSave({ text: value })
  }

  return (
    <form onSubmit={save}>
      <Editor value={value} onChange={onChange} maxHeight={maxHeight} />
      <button onClick={save}>Save</button>
    </form>
  )
}
```

## No maxHeight Example

<Preview>
  <Story name="Editor">
    <Suspense fallback={null}>
      <Form
        initialValues={{
          message:
            '<h1>Hello<span style="font-family: Tahoma;"> world!</span></h1>',
        }}
        onSubmit={values => console.log('values', values)}
        render={({ handleSubmit, values }) => (
          <form onSubmit={handleSubmit}>
            <Field component={FormItem} name="message" type="editor" />
            <pre>{JSON.stringify(values, null, 4)}</pre>
          </form>
        )}
      />
    </Suspense>
  </Story>
</Preview>

## Example

<Preview>
  <Story name="Editor Without maxHeight">
    <Suspense fallback={null}>
      <Form
        initialValues={{
          message:
            '<h1>Hello<span style="font-family: Tahoma;"> world!</span></h1>',
        }}
        onSubmit={values => console.log('values', values)}
        render={({ handleSubmit, values }) => (
          <form onSubmit={handleSubmit}>
            <Field component={FormItem} name="message" maxHeight="none" type="editor" />
            <pre>{JSON.stringify(values, null, 4)}</pre>
          </form>
        )}
      />
    </Suspense>
  </Story>
</Preview>

## Props

<Props of={Editor} />
